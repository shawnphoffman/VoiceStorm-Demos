<!DOCTYPE html>
<html>
<head>
	<title>DySi Demos - Basic Grid</title>
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
	<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
	<h1>Basic Grid</h1>
	<p>Below is a basic example of how to use the VoiceStorm APIs to render posts on your site.</p>
	<p>For more information about the VoiceStorm API &amp; JavaScript SDK, please refer to <a href="https://dev.voicestorm.com">our documentation</a>.</p>
	<div class="posts"></div>
</div>

<script type="text/javascript" src="https://code.jquery.com/jquery-2.2.1.min.js" crossorigin="anonymous"></script>
<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script>	

	function VoiceStormAsyncInit()
	{
		var $posts = $('.posts');

		VoiceStorm.api("GET", "stream?name=current", { "include": "images,content,watchVideo"}).then(function(response){
			$.each(response.posts, function(i, post){
				var $post = $('<div class="post"></div>');

				// Title
				var $title = $('<h2></h2>').text(post.title);
				$post.append($title);

				// Image
				if (post.images && post.images.Box320){
					$image = $('<img />').attr('src', post.images.Box320.url);
					$post.append($image);
				}

				// Link
				if (post.cleanPermaLink){
					$post.append($('<a target="_blank">Visit Link</a>').attr('href', post.cleanPermaLink));
				}

				// Posted on VS Date
				if (post.author && post.startDate){
					var date = new Date(post.startDate);
					$post.append($('<span></span>').text('Date Posted: ' + date.toLocaleString()));
				}

				$posts.append($post);
			});
		});
	}

	// loads the SDK asynchronously
	(function (d, s, id)
	{
		var js, fjs = d.getElementsByTagName(s)[0];
		if (d.getElementById(id)) { return; }
		js = d.createElement(s); js.id = id;
		js.src = 'https://github.voicestorm.com/v1/voicestorm.js';
		fjs.parentNode.insertBefore(js, fjs);
	}(document, 'script', 'voicestorm-sdk'));

</script>
</body>
</html>